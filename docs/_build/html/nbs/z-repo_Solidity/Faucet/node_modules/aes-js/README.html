
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AES-JS &#8212; Mathematics</title>
    
  <link href="../../../../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../../../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../_static/jquery.js"></script>
    <script src="../../../../../_static/underscore.js"></script>
    <script src="../../../../../_static/doctools.js"></script>
    <script src="../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../../index.html">
      
      <img src="../../../../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Mathematics</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../README.html">
   Mathematics
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Foundations
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../Sets.html">
   Sets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../NumberTheory.html">
   Number Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../AlgorithmicNumberTheory.html">
   Algorithmic Number Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../ModularArithmetic.html">
   Modular Arithmetic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../Polynomials.html">
   Polynomials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../Structures.html">
   Structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../Groups.html">
   Groups
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../Fields.html">
   Fields
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../mathematical_foundations.html">
   Imports
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Modeling
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../RandomWalks.html">
   Random Walks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../DigitalSignalProcessing.html">
   Digital Signal Processing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../DifferentialEquations.html">
   Differential Equations
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Blockchain
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../PythonBlockchain.html">
   Python Blockchain
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../_sources/nbs/z-repo_Solidity/Faucet/node_modules/aes-js/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/davefriedman01/Resources"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/davefriedman01/Resources/issues/new?title=Issue%20on%20page%20%2Fnbs/z-repo_Solidity/Faucet/node_modules/aes-js/README.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   AES-JS
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#features">
     Features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#migrating-from-2-x-to-3-x">
     Migrating from 2.x to 3.x
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api">
   API
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#node-js">
     Node.js
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#web-browser">
     Web Browser
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#keys">
     Keys
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#common-modes-of-operation">
     Common Modes of Operation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ctr-counter-recommended">
       CTR - Counter (recommended)
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cbc-cipher-block-chaining-recommended">
       CBC - Cipher-Block Chaining (recommended)
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cfb-cipher-feedback">
       CFB - Cipher Feedback
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ofb-output-feedback">
       OFB - Output Feedback
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ecb-electronic-codebook-not-recommended">
       ECB - Electronic Codebook (NOT recommended)
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#block-cipher">
     Block Cipher
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#notes">
   Notes
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-a-key">
     What is a Key
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#performance">
     Performance
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tests">
     Tests
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#faq">
     FAQ
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#how-do-i-get-a-question-i-have-added">
       How do I get a question I have added?
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#donations">
     Donations
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="aes-js">
<h1>AES-JS<a class="headerlink" href="#aes-js" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://badge.fury.io/js/aes-js"><img alt="npm version" src="https://badge.fury.io/js/aes-js.svg" /></a></p>
<p>A pure JavaScript implementation of the AES block cipher algorithm and all common modes of operation (CBC, CFB, CTR, ECB and OFB).</p>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Pure JavaScript (with no dependencies)</p></li>
<li><p>Supports all key sizes (128-bit, 192-bit and 256-bit)</p></li>
<li><p>Supports all common modes of operation (CBC, CFB, CTR, ECB and OFB)</p></li>
<li><p>Works in either node.js or web browsers</p></li>
</ul>
</div>
<div class="section" id="migrating-from-2-x-to-3-x">
<h2>Migrating from 2.x to 3.x<a class="headerlink" href="#migrating-from-2-x-to-3-x" title="Permalink to this headline">¶</a></h2>
<p>The utility functions have been renamed in the 3.x branch, since they were causing a great deal of confusion converting between bytes and string.</p>
<p>The examples have also been updated to encode binary data as printable hex strings.</p>
<p><strong>Strings and Bytes</strong></p>
<p>Strings should <strong>NOT</strong> be used as keys. UTF-8 allows variable length, multi-byte characters, so a string that is 16 <em>characters</em> long may not be 16 <em>bytes</em> long.</p>
<p>Also, UTF8 should <strong>NOT</strong> be used to store arbitrary binary data as it is a <em>string</em> encoding format, not a <em>binary</em> encoding format.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// aesjs.util.convertStringToBytes(aString)</span>
<span class="c1">// Becomes:</span>
<span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">aString</span><span class="p">)</span>


<span class="c1">// aesjs.util.convertBytesToString(aString)</span>
<span class="c1">// Becomes:</span>
<span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">aString</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Bytes and Hex strings</strong></p>
<p>Binary data, such as encrypted bytes, can safely be stored and printed as hexidecimal strings.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// aesjs.util.convertStringToBytes(aString, &#39;hex&#39;)</span>
<span class="c1">// Becomes:</span>
<span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">aString</span><span class="p">)</span>


<span class="c1">// aesjs.util.convertBytesToString(aString, &#39;hex&#39;)</span>
<span class="c1">// Becomes:</span>
<span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">aString</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Typed Arrays</strong></p>
<p>The 3.x and above versions of aes-js use <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array">Uint8Array</a> instead of Array, which reduces code size when used with Browserify (it no longer pulls in Buffer) and is also about <strong>twice</strong> the speed.</p>
<p>However, if you need to support browsers older than IE 10, you should continue using version 2.x.</p>
</div>
</div>
<div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="node-js">
<h2>Node.js<a class="headerlink" href="#node-js" title="Permalink to this headline">¶</a></h2>
<p>To install <code class="docutils literal notranslate"><span class="pre">aes-js</span></code> in your node.js project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">aes</span><span class="o">-</span><span class="n">js</span>
</pre></div>
</div>
<p>And to access it from within node, simply add:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">aesjs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;aes-js&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="web-browser">
<h2>Web Browser<a class="headerlink" href="#web-browser" title="Permalink to this headline">¶</a></h2>
<p>To use <code class="docutils literal notranslate"><span class="pre">aes-js</span></code> in a web page, add the following:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.rawgit.com/ricmoo/aes-js/e27b99df/index.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="keys">
<h2>Keys<a class="headerlink" href="#keys" title="Permalink to this headline">¶</a></h2>
<p>All keys must be 128 bits (16 bytes), 192 bits (24 bytes) or 256 bits (32 bytes) long.</p>
<p>The library work with <code class="docutils literal notranslate"><span class="pre">Array</span></code>, <code class="docutils literal notranslate"><span class="pre">Uint8Array</span></code> and <code class="docutils literal notranslate"><span class="pre">Buffer</span></code> objects as well as any <em>array-like</em> object (i.e. must have a <code class="docutils literal notranslate"><span class="pre">length</span></code> property, and have a valid byte value for each entry).</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// 128-bit, 192-bit and 256-bit keys</span>
<span class="kd">var</span> <span class="nx">key_128</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">7</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">11</span><span class="p">,</span> <span class="mf">12</span><span class="p">,</span> <span class="mf">13</span><span class="p">,</span> <span class="mf">14</span><span class="p">,</span> <span class="mf">15</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">key_192</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">7</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">11</span><span class="p">,</span> <span class="mf">12</span><span class="p">,</span> <span class="mf">13</span><span class="p">,</span> <span class="mf">14</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span>
               <span class="mf">16</span><span class="p">,</span> <span class="mf">17</span><span class="p">,</span> <span class="mf">18</span><span class="p">,</span> <span class="mf">19</span><span class="p">,</span> <span class="mf">20</span><span class="p">,</span> <span class="mf">21</span><span class="p">,</span> <span class="mf">22</span><span class="p">,</span> <span class="mf">23</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">key_256</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">7</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">11</span><span class="p">,</span> <span class="mf">12</span><span class="p">,</span> <span class="mf">13</span><span class="p">,</span> <span class="mf">14</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span>
               <span class="mf">16</span><span class="p">,</span> <span class="mf">17</span><span class="p">,</span> <span class="mf">18</span><span class="p">,</span> <span class="mf">19</span><span class="p">,</span> <span class="mf">20</span><span class="p">,</span> <span class="mf">21</span><span class="p">,</span> <span class="mf">22</span><span class="p">,</span> <span class="mf">23</span><span class="p">,</span> <span class="mf">24</span><span class="p">,</span> <span class="mf">25</span><span class="p">,</span> <span class="mf">26</span><span class="p">,</span> <span class="mf">27</span><span class="p">,</span> <span class="mf">28</span><span class="p">,</span>
               <span class="mf">29</span><span class="p">,</span> <span class="mf">30</span><span class="p">,</span> <span class="mf">31</span><span class="p">];</span>

<span class="c1">// or, you may use Uint8Array:</span>
<span class="kd">var</span> <span class="nx">key_128_array</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint8Array</span><span class="p">(</span><span class="nx">key_128</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">key_192_array</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint8Array</span><span class="p">(</span><span class="nx">key_192</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">key_256_array</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint8Array</span><span class="p">(</span><span class="nx">key_256</span><span class="p">);</span>

<span class="c1">// or, you may use Buffer in node.js:</span>
<span class="kd">var</span> <span class="nx">key_128_buffer</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">key_128</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">key_192_buffer</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">key_192</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">key_256_buffer</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">key_256</span><span class="p">);</span>
</pre></div>
</div>
<p>To generate keys from simple-to-remember passwords, consider using a password-based key-derivation function such as <a class="reference external" href="https://www.npmjs.com/package/scrypt-js">scrypt</a> or <a class="reference external" href="https://www.npmjs.com/search?q=bcrypt">bcrypt</a>.</p>
</div>
<div class="section" id="common-modes-of-operation">
<h2>Common Modes of Operation<a class="headerlink" href="#common-modes-of-operation" title="Permalink to this headline">¶</a></h2>
<p>There are several modes of operations, each with various pros and cons. In general though, the <strong>CBC</strong> and <strong>CTR</strong> modes are recommended. The <strong>ECB is NOT recommended.</strong>, and is included primarily for completeness.</p>
<div class="section" id="ctr-counter-recommended">
<h3>CTR - Counter (recommended)<a class="headerlink" href="#ctr-counter-recommended" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// An example 128-bit key (16 bytes * 8 bits/byte = 128 bits)</span>
<span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">7</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">11</span><span class="p">,</span> <span class="mf">12</span><span class="p">,</span> <span class="mf">13</span><span class="p">,</span> <span class="mf">14</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">16</span> <span class="p">];</span>

<span class="c1">// Convert text to bytes</span>
<span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s1">&#39;Text may be any length you wish, no padding is required.&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">textBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>

<span class="c1">// The counter is optional, and if omitted will begin at 1</span>
<span class="kd">var</span> <span class="nx">aesCtr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">ModeOfOperation</span><span class="p">.</span><span class="nx">ctr</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">Counter</span><span class="p">(</span><span class="mf">5</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesCtr</span><span class="p">.</span><span class="nx">encrypt</span><span class="p">(</span><span class="nx">textBytes</span><span class="p">);</span>

<span class="c1">// To print or store the binary data, you may convert it to hex</span>
<span class="kd">var</span> <span class="nx">encryptedHex</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>
<span class="c1">// &quot;a338eda3874ed884b6199150d36f49988c90f5c47fe7792b0cf8c7f77eeffd87</span>
<span class="c1">//  ea145b73e82aefcf2076f881c88879e4e25b1d7b24ba2788&quot;</span>

<span class="c1">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>

<span class="c1">// The counter mode of operation maintains internal state, so to</span>
<span class="c1">// decrypt a new instance must be instantiated.</span>
<span class="kd">var</span> <span class="nx">aesCtr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">ModeOfOperation</span><span class="p">.</span><span class="nx">ctr</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">Counter</span><span class="p">(</span><span class="mf">5</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">decryptedBytes</span> <span class="o">=</span> <span class="nx">aesCtr</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>

<span class="c1">// Convert our bytes back into text</span>
<span class="kd">var</span> <span class="nx">decryptedText</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">decryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">decryptedText</span><span class="p">);</span>
<span class="c1">// &quot;Text may be any length you wish, no padding is required.&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="cbc-cipher-block-chaining-recommended">
<h3>CBC - Cipher-Block Chaining (recommended)<a class="headerlink" href="#cbc-cipher-block-chaining-recommended" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// An example 128-bit key</span>
<span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">7</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">11</span><span class="p">,</span> <span class="mf">12</span><span class="p">,</span> <span class="mf">13</span><span class="p">,</span> <span class="mf">14</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">16</span> <span class="p">];</span>

<span class="c1">// The initialization vector (must be 16 bytes)</span>
<span class="kd">var</span> <span class="nx">iv</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">21</span><span class="p">,</span> <span class="mf">22</span><span class="p">,</span> <span class="mf">23</span><span class="p">,</span> <span class="mf">24</span><span class="p">,</span> <span class="mf">25</span><span class="p">,</span> <span class="mf">26</span><span class="p">,</span> <span class="mf">27</span><span class="p">,</span> <span class="mf">28</span><span class="p">,</span> <span class="mf">29</span><span class="p">,</span> <span class="mf">30</span><span class="p">,</span> <span class="mf">31</span><span class="p">,</span> <span class="mf">32</span><span class="p">,</span> <span class="mf">33</span><span class="p">,</span> <span class="mf">34</span><span class="p">,</span><span class="mf">35</span><span class="p">,</span> <span class="mf">36</span> <span class="p">];</span>

<span class="c1">// Convert text to bytes (text must be a multiple of 16 bytes)</span>
<span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s1">&#39;TextMustBe16Byte&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">textBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">aesCbc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">ModeOfOperation</span><span class="p">.</span><span class="nx">cbc</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">iv</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesCbc</span><span class="p">.</span><span class="nx">encrypt</span><span class="p">(</span><span class="nx">textBytes</span><span class="p">);</span>

<span class="c1">// To print or store the binary data, you may convert it to hex</span>
<span class="kd">var</span> <span class="nx">encryptedHex</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>
<span class="c1">// &quot;104fb073f9a131f2cab49184bb864ca2&quot;</span>

<span class="c1">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>

<span class="c1">// The cipher-block chaining mode of operation maintains internal</span>
<span class="c1">// state, so to decrypt a new instance must be instantiated.</span>
<span class="kd">var</span> <span class="nx">aesCbc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">ModeOfOperation</span><span class="p">.</span><span class="nx">cbc</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">iv</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">decryptedBytes</span> <span class="o">=</span> <span class="nx">aesCbc</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>

<span class="c1">// Convert our bytes back into text</span>
<span class="kd">var</span> <span class="nx">decryptedText</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">decryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">decryptedText</span><span class="p">);</span>
<span class="c1">// &quot;TextMustBe16Byte&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="cfb-cipher-feedback">
<h3>CFB - Cipher Feedback<a class="headerlink" href="#cfb-cipher-feedback" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// An example 128-bit key</span>
<span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">7</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">11</span><span class="p">,</span> <span class="mf">12</span><span class="p">,</span> <span class="mf">13</span><span class="p">,</span> <span class="mf">14</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">16</span> <span class="p">];</span>

<span class="c1">// The initialization vector (must be 16 bytes)</span>
<span class="kd">var</span> <span class="nx">iv</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">21</span><span class="p">,</span> <span class="mf">22</span><span class="p">,</span> <span class="mf">23</span><span class="p">,</span> <span class="mf">24</span><span class="p">,</span> <span class="mf">25</span><span class="p">,</span> <span class="mf">26</span><span class="p">,</span> <span class="mf">27</span><span class="p">,</span> <span class="mf">28</span><span class="p">,</span> <span class="mf">29</span><span class="p">,</span> <span class="mf">30</span><span class="p">,</span> <span class="mf">31</span><span class="p">,</span> <span class="mf">32</span><span class="p">,</span> <span class="mf">33</span><span class="p">,</span> <span class="mf">34</span><span class="p">,</span><span class="mf">35</span><span class="p">,</span> <span class="mf">36</span> <span class="p">];</span>

<span class="c1">// Convert text to bytes (must be a multiple of the segment size you choose below)</span>
<span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s1">&#39;TextMustBeAMultipleOfSegmentSize&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">textBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>

<span class="c1">// The segment size is optional, and defaults to 1</span>
<span class="kd">var</span> <span class="nx">segmentSize</span> <span class="o">=</span> <span class="mf">8</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">aesCfb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">ModeOfOperation</span><span class="p">.</span><span class="nx">cfb</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">iv</span><span class="p">,</span> <span class="nx">segmentSize</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesCfb</span><span class="p">.</span><span class="nx">encrypt</span><span class="p">(</span><span class="nx">textBytes</span><span class="p">);</span>

<span class="c1">// To print or store the binary data, you may convert it to hex</span>
<span class="kd">var</span> <span class="nx">encryptedHex</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>
<span class="c1">// &quot;55e3af2638c560b4fdb9d26a630733ea60197ec23deb85b1f60f71f10409ce27&quot;</span>

<span class="c1">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>

<span class="c1">// The cipher feedback mode of operation maintains internal state,</span>
<span class="c1">// so to decrypt a new instance must be instantiated.</span>
<span class="kd">var</span> <span class="nx">aesCfb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">ModeOfOperation</span><span class="p">.</span><span class="nx">cfb</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">iv</span><span class="p">,</span> <span class="mf">8</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">decryptedBytes</span> <span class="o">=</span> <span class="nx">aesCfb</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>

<span class="c1">// Convert our bytes back into text</span>
<span class="kd">var</span> <span class="nx">decryptedText</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">decryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">decryptedText</span><span class="p">);</span>
<span class="c1">// &quot;TextMustBeAMultipleOfSegmentSize&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="ofb-output-feedback">
<h3>OFB - Output Feedback<a class="headerlink" href="#ofb-output-feedback" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// An example 128-bit key</span>
<span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">7</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">11</span><span class="p">,</span> <span class="mf">12</span><span class="p">,</span> <span class="mf">13</span><span class="p">,</span> <span class="mf">14</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">16</span> <span class="p">];</span>

<span class="c1">// The initialization vector (must be 16 bytes)</span>
<span class="kd">var</span> <span class="nx">iv</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">21</span><span class="p">,</span> <span class="mf">22</span><span class="p">,</span> <span class="mf">23</span><span class="p">,</span> <span class="mf">24</span><span class="p">,</span> <span class="mf">25</span><span class="p">,</span> <span class="mf">26</span><span class="p">,</span> <span class="mf">27</span><span class="p">,</span> <span class="mf">28</span><span class="p">,</span> <span class="mf">29</span><span class="p">,</span> <span class="mf">30</span><span class="p">,</span> <span class="mf">31</span><span class="p">,</span> <span class="mf">32</span><span class="p">,</span> <span class="mf">33</span><span class="p">,</span> <span class="mf">34</span><span class="p">,</span><span class="mf">35</span><span class="p">,</span> <span class="mf">36</span> <span class="p">];</span>

<span class="c1">// Convert text to bytes</span>
<span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s1">&#39;Text may be any length you wish, no padding is required.&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">textBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">aesOfb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">ModeOfOperation</span><span class="p">.</span><span class="nx">ofb</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">iv</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesOfb</span><span class="p">.</span><span class="nx">encrypt</span><span class="p">(</span><span class="nx">textBytes</span><span class="p">);</span>

<span class="c1">// To print or store the binary data, you may convert it to hex</span>
<span class="kd">var</span> <span class="nx">encryptedHex</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>
<span class="c1">// &quot;55e3af2655dd72b9f32456042f39bae9accff6259159e608be55a1aa313c598d</span>
<span class="c1">//  b4b18406d89c83841c9d1af13b56de8eda8fcfe9ec8e75e8&quot;</span>

<span class="c1">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>

<span class="c1">// The output feedback mode of operation maintains internal state,</span>
<span class="c1">// so to decrypt a new instance must be instantiated.</span>
<span class="kd">var</span> <span class="nx">aesOfb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">ModeOfOperation</span><span class="p">.</span><span class="nx">ofb</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">iv</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">decryptedBytes</span> <span class="o">=</span> <span class="nx">aesOfb</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>

<span class="c1">// Convert our bytes back into text</span>
<span class="kd">var</span> <span class="nx">decryptedText</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">decryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">decryptedText</span><span class="p">);</span>
<span class="c1">// &quot;Text may be any length you wish, no padding is required.&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="ecb-electronic-codebook-not-recommended">
<h3>ECB - Electronic Codebook (NOT recommended)<a class="headerlink" href="#ecb-electronic-codebook-not-recommended" title="Permalink to this headline">¶</a></h3>
<p>This mode is <strong>not</strong> recommended. Since, for a given key, the same plaintext block in produces the same ciphertext block out, this mode of operation can leak data, such as patterns. For more details and examples, see the Wikipedia article, <a class="reference external" href="http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Electronic_Codebook_.28ECB.29">Electronic Codebook</a>.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// An example 128-bit key</span>
<span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">7</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">10</span><span class="p">,</span> <span class="mf">11</span><span class="p">,</span> <span class="mf">12</span><span class="p">,</span> <span class="mf">13</span><span class="p">,</span> <span class="mf">14</span><span class="p">,</span> <span class="mf">15</span><span class="p">,</span> <span class="mf">16</span> <span class="p">];</span>

<span class="c1">// Convert text to bytes</span>
<span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s1">&#39;TextMustBe16Byte&#39;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">textBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">aesEcb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">ModeOfOperation</span><span class="p">.</span><span class="nx">ecb</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesEcb</span><span class="p">.</span><span class="nx">encrypt</span><span class="p">(</span><span class="nx">textBytes</span><span class="p">);</span>

<span class="c1">// To print or store the binary data, you may convert it to hex</span>
<span class="kd">var</span> <span class="nx">encryptedHex</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>
<span class="c1">// &quot;a7d93b35368519fac347498dec18b458&quot;</span>

<span class="c1">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>

<span class="c1">// Since electronic codebook does not store state, we can</span>
<span class="c1">// reuse the same instance.</span>
<span class="c1">//var aesEcb = new aesjs.ModeOfOperation.ecb(key);</span>
<span class="kd">var</span> <span class="nx">decryptedBytes</span> <span class="o">=</span> <span class="nx">aesEcb</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>

<span class="c1">// Convert our bytes back into text</span>
<span class="kd">var</span> <span class="nx">decryptedText</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">decryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">decryptedText</span><span class="p">);</span>
<span class="c1">// &quot;TextMustBe16Byte&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="block-cipher">
<h2>Block Cipher<a class="headerlink" href="#block-cipher" title="Permalink to this headline">¶</a></h2>
<p>You should usually use one of the above common modes of operation. Using the block cipher algorithm directly is also possible using <strong>ECB</strong> as that mode of operation is merely a thin wrapper.</p>
<p>But this might be useful to experiment with custom modes of operation or play with block cipher algorithms.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// the AES block cipher algorithm works on 16 byte bloca ks, no more, no less</span>
<span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;ABlockIs16Bytes!&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">textAsBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">textAsBytes</span><span class="p">);</span>
<span class="c1">// [65, 66, 108, 111, 99, 107, 73, 115, 49, 54, 66, 121, 116, 101, 115, 33]</span>

<span class="c1">// create an instance of the block cipher algorithm</span>
<span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">4</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">6</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">5</span><span class="p">,</span> <span class="mf">8</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">7</span><span class="p">,</span> <span class="mf">9</span><span class="p">,</span> <span class="mf">3</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">aes</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">AES</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>

<span class="c1">// encrypt...</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aes</span><span class="p">.</span><span class="nx">encrypt</span><span class="p">(</span><span class="nx">textAsBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>
<span class="c1">// [136, 15, 199, 174, 118, 133, 233, 177, 143, 47, 42, 211, 96, 55, 107, 109] </span>

<span class="c1">// To print or store the binary data, you may convert it to hex</span>
<span class="kd">var</span> <span class="nx">encryptedHex</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>
<span class="c1">// &quot;880fc7ae7685e9b18f2f2ad360376b6d&quot;</span>

<span class="c1">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="kd">var</span> <span class="nx">encryptedBytes</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hex</span><span class="p">.</span><span class="nx">toBytes</span><span class="p">(</span><span class="nx">encryptedHex</span><span class="p">);</span>

<span class="c1">// decrypt...</span>
<span class="kd">var</span> <span class="nx">decryptedBytes</span> <span class="o">=</span> <span class="nx">aes</span><span class="p">.</span><span class="nx">decrypt</span><span class="p">(</span><span class="nx">encryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">decryptedBytes</span><span class="p">);</span>
<span class="c1">// [65, 66, 108, 111, 99, 107, 73, 115, 49, 54, 66, 121, 116, 101, 115, 33]</span>


<span class="c1">// decode the bytes back into our original text</span>
<span class="kd">var</span> <span class="nx">decryptedText</span> <span class="o">=</span> <span class="nx">aesjs</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">utf8</span><span class="p">.</span><span class="nx">fromBytes</span><span class="p">(</span><span class="nx">decryptedBytes</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">decryptedText</span><span class="p">);</span>
<span class="c1">// &quot;ABlockIs16Bytes!&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="notes">
<h1>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-a-key">
<h2>What is a Key<a class="headerlink" href="#what-is-a-key" title="Permalink to this headline">¶</a></h2>
<p>This seems to be a point of confusion for many people new to using encryption. You can think of the key as the <em>“password”</em>. However, these algorithms require the <em>“password”</em> to be a specific length.</p>
<p>With AES, there are three possible key lengths, 128-bit (16 bytes), 192-bit (24 bytes) or 256-bit (32 bytes). When you create an AES object, the key size is automatically detected, so it is important to pass in a key of the correct length.</p>
<p>Often, you wish to provide a password of arbitrary length, for example, something easy to remember or write down. In these cases, you must come up with a way to transform the password into a key of a specific length. A <strong>Password-Based Key Derivation Function</strong> (PBKDF) is an algorithm designed for this exact purpose.</p>
<p>Here is an example, using the popular (possibly obsolete?) pbkdf2:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">pbkdf2</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;pbkdf2&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">key_128</span> <span class="o">=</span> <span class="nx">pbkdf2</span><span class="p">.</span><span class="nx">pbkdf2Sync</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;salt&#39;</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">128</span> <span class="o">/</span> <span class="mf">8</span><span class="p">,</span> <span class="s1">&#39;sha512&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">key_192</span> <span class="o">=</span> <span class="nx">pbkdf2</span><span class="p">.</span><span class="nx">pbkdf2Sync</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;salt&#39;</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">192</span> <span class="o">/</span> <span class="mf">8</span><span class="p">,</span> <span class="s1">&#39;sha512&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">key_256</span> <span class="o">=</span> <span class="nx">pbkdf2</span><span class="p">.</span><span class="nx">pbkdf2Sync</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;salt&#39;</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">256</span> <span class="o">/</span> <span class="mf">8</span><span class="p">,</span> <span class="s1">&#39;sha512&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Another possibility, is to use a hashing function, such as SHA256 to hash the password, but this method is vulnerable to <a class="reference external" href="http://en.wikipedia.org/wiki/Rainbow_table">Rainbow Attacks</a>, unless you use a <a class="reference external" href="http://en.wikipedia.org/wiki/Salt_(cryptography)">salt</a>.</p>
</div>
<div class="section" id="performance">
<h2>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h2>
<p>Todo…</p>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<p>A test suite has been generated (<code class="docutils literal notranslate"><span class="pre">test/test-vectors.json</span></code>) from a known correct implementation, <a class="reference external" href="https://www.dlitz.net/software/pycrypto/">pycrypto</a>. To generate new test vectors, run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">generate-tests.py</span></code>.</p>
<p>To run the node.js test suite:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">test</span>
</pre></div>
</div>
<p>To run the web browser tests, open the <code class="docutils literal notranslate"><span class="pre">test/test.html</span></code> file in your browser.</p>
</div>
<div class="section" id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-do-i-get-a-question-i-have-added">
<h3>How do I get a question I have added?<a class="headerlink" href="#how-do-i-get-a-question-i-have-added" title="Permalink to this headline">¶</a></h3>
<p>E-mail me at <a class="reference external" href="mailto:aes-js&#37;&#52;&#48;ricmoo&#46;com">aes-js<span>&#64;</span>ricmoo<span>&#46;</span>com</a> with any questions, suggestions, comments, et cetera.</p>
</div>
</div>
<div class="section" id="donations">
<h2>Donations<a class="headerlink" href="#donations" title="Permalink to this headline">¶</a></h2>
<p>Obviously, it’s all licensed under the MIT license, so use it as you wish; but if you’d like to buy me a coffee, I won’t complain. =)</p>
<ul class="simple">
<li><p>Bitcoin - <code class="docutils literal notranslate"><span class="pre">1K1Ax9t6uJmjE4X5xcoVuyVTsiLrYRqe2P</span></code></p></li>
<li><p>Ethereum - <code class="docutils literal notranslate"><span class="pre">0x70bDC274028F3f391E398dF8e3977De64FEcBf04</span></code></p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./nbs/z-repo_Solidity/Faucet/node_modules/aes-js"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Dave Friedman<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../../../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>