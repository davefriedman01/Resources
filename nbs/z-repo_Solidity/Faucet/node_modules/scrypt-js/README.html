
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>scrypt &#8212; Mathematics</title>
    
  <link href="../../../../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../../../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../_static/jquery.js"></script>
    <script src="../../../../../_static/underscore.js"></script>
    <script src="../../../../../_static/doctools.js"></script>
    <script src="../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../../index.html">
      
      <img src="../../../../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Mathematics</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../README.html">
   Mathematics
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Foundations
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../Sets.html">
   Sets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../NumberTheory.html">
   Number Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../AlgorithmicNumberTheory.html">
   Algorithmic Number Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../ModularArithmetic.html">
   Modular Arithmetic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../Polynomials.html">
   Polynomials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../Structures.html">
   Structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../Groups.html">
   Groups
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../Fields.html">
   Fields
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../mathematical_foundations.html">
   Imports
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Modeling
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../RandomWalks.html">
   Random Walks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../DigitalSignalProcessing.html">
   Digital Signal Processing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../DifferentialEquations.html">
   Differential Equations
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Blockchain
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../PythonBlockchain.html">
   Python Blockchain
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../_sources/nbs/z-repo_Solidity/Faucet/node_modules/scrypt-js/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/davefriedman01/Resources"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/davefriedman01/Resources/issues/new?title=Issue%20on%20page%20%2Fnbs/z-repo_Solidity/Faucet/node_modules/scrypt-js/README.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#features">
   Features:
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tuning">
   Tuning
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing">
   Installing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api">
   API
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example">
   Example
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#encoding-notes">
   Encoding Notes
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#suggestions">
     Suggestions
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tests">
   Tests
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#special-thanks">
   Special Thanks
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   License
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#references">
   References
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#donations">
   Donations
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="scrypt">
<h1>scrypt<a class="headerlink" href="#scrypt" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference external" href="https://en.wikipedia.org/wiki/Scrypt">scrypt</a> password-base key derivation
function (pbkdf) is an algorithm designed to be brute-force resistant that
converts human readable passwords into fixed length arrays of bytes, which can
then be used as a key for symmetric block ciphers, private keys, et cetera.</p>
<div class="section" id="features">
<h2>Features:<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Non-blocking</strong> - Gives other events in the event loop opportunities to run (asynchronous)</p></li>
<li><p><strong>Cancellable</strong> - If the key is no longer required, the computation can be cancelled</p></li>
<li><p><strong>Progress Callback</strong> - Provides the current progress of key derivation as a percentage complete</p></li>
</ul>
</div>
<div class="section" id="tuning">
<h2>Tuning<a class="headerlink" href="#tuning" title="Permalink to this headline">¶</a></h2>
<p>The scrypt algorithm is, by design, expensive to execute, which increases the amount of time an attacker requires in order to brute force guess a password, adjustable by several parameters which can be tuned:</p>
<ul class="simple">
<li><p><strong>N</strong> - The CPU/memory cost; increasing this increases the overall difficulty</p></li>
<li><p><strong>r</strong> - The block size; increasing this increases the dependency on memory latency and bandwidth</p></li>
<li><p><strong>p</strong> - The parallelization cost; increasing this increases the dependency on multi-processing</p></li>
</ul>
</div>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p><strong>node.js</strong></p>
<p>If you do not require the progress callback or cancellable features, and your application
is specific to <em>node.js</em>, you should likely use the
<a class="reference external" href="https://nodejs.org/api/crypto.html#crypto_crypto_scrypt_password_salt_keylen_options_callback">built-in crypto package</a>.</p>
<p>Otherwise, to install in node.js, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">scrypt</span><span class="o">-</span><span class="n">js</span>
</pre></div>
</div>
<p><strong>browser</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://raw.githubusercontent.com/ricmoo/scrypt-js/master/scrypt.js&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p><strong>scrypt . scrypt ( password , salt , N , r , p , dkLen [ , progressCallback ] )</strong> <em>=&gt; Promise<Uint8Array></em></p>
<p>Compute the scrypt PBKDF asynchronously using a Promise. If <em>progressCallback</em> is
provided, it is periodically called with a single parameter, a number between 0 and
1 (inclusive) indicating the completion progress; it will <strong>always</strong> emit 0 at the
beginning and 1 at the end, and numbers between may repeat.</p>
<p><strong>scrypt . syncScrypt ( password , salt , N , r , p , dkLen )</strong> <em>=&gt; Uint8Array</em></p>
<p>Compute the scrypt PBKDF synchronously. Keep in mind this may stall UI and other tasks and the
asynchronous version is highly preferred.</p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;progress&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>% complete...<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="c">&lt;!-- These two libraries are highly recommended for encoding password/salt --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;libs/buffer.js&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

    <span class="c">&lt;!-- This shim library greatly improves performance of the scrypt algorithm --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;libs/setImmediate.js&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;index.js&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

      <span class="c1">// See the section below: &quot;Encoding Notes&quot;</span>
      <span class="kd">const</span> <span class="nx">password</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">SlowBuffer</span><span class="p">(</span><span class="s2">&quot;anyPassword&quot;</span><span class="p">.</span><span class="nx">normalize</span><span class="p">(</span><span class="s1">&#39;NFKC&#39;</span><span class="p">));</span>
      <span class="kd">const</span> <span class="nx">salt</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">SlowBuffer</span><span class="p">(</span><span class="s2">&quot;someSalt&quot;</span><span class="p">.</span><span class="nx">normalize</span><span class="p">(</span><span class="s1">&#39;NFKC&#39;</span><span class="p">));</span>

      <span class="kd">const</span> <span class="nx">N</span> <span class="o">=</span> <span class="mf">1024</span><span class="p">,</span> <span class="nx">r</span> <span class="o">=</span> <span class="mf">8</span><span class="p">,</span> <span class="nx">p</span> <span class="o">=</span> <span class="mf">1</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">dkLen</span> <span class="o">=</span> <span class="mf">32</span><span class="p">;</span>

      <span class="kd">function</span> <span class="nx">updateInterface</span><span class="p">(</span><span class="nx">progress</span><span class="p">)</span> <span class="p">{</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;progress&quot;</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">trunc</span><span class="p">(</span><span class="mf">100</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// Async</span>
      <span class="kd">const</span> <span class="nx">keyPromise</span> <span class="o">=</span> <span class="nx">scrypt</span><span class="p">.</span><span class="nx">scrypt</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="nx">salt</span><span class="p">,</span> <span class="nx">N</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">dkLen</span><span class="p">,</span> <span class="nx">updateInterface</span><span class="p">);</span>

      <span class="nx">keyPromise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Derived Key (async): &quot;</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span>
      <span class="p">});</span>

      <span class="c1">// Sync</span>
      <span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">scrypt</span><span class="p">.</span><span class="nx">syncScrypt</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="nx">salt</span><span class="p">,</span> <span class="nx">N</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">dkLen</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Derived Key (sync): &quot;</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="encoding-notes">
<h2>Encoding Notes<a class="headerlink" href="#encoding-notes" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TL</span><span class="p">;</span><span class="n">DR</span> <span class="o">-</span> <span class="n">either</span> <span class="n">only</span> <span class="n">allow</span> <span class="n">ASCII</span> <span class="n">characters</span> <span class="ow">in</span> <span class="n">passwords</span><span class="p">,</span> <span class="ow">or</span> <span class="n">use</span>
        <span class="n">String</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFKC&#39;</span><span class="p">)</span> <span class="n">on</span> <span class="nb">any</span> <span class="n">password</span>
</pre></div>
</div>
<p>It is <em>HIGHLY</em> recommended that you do <strong>NOT</strong> pass strings into this (or any password-base key derivation function) library without careful consideration; you should convert your strings to a canonical format that you will use consistently across all platforms.</p>
<p>When encoding passwords with UTF-8, it is important to realize that there may be multiple UTF-8 representations of a given string. Since the key generated by a password-base key derivation function is <em>dependent on the specific bytes</em>, this matters a great deal.</p>
<p><strong>Composed vs. Decomposed</strong></p>
<p>Certain UTF-8 code points can be combined with other characters to create composed characters. For example, the letter <em>a with the umlaut diacritic mark</em> (two dots over it) can be expressed two ways; as its composed form, U+00FC; or its decomposed form, which is the letter “u” followed by U+0308 (which basically means modify the previous character by adding an umlaut to it).</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// In the following two cases, a &quot;u&quot; with an umlaut would be seen</span>
<span class="o">&gt;</span> <span class="s1">&#39;\u00fc&#39;</span>
<span class="o">&gt;</span> <span class="s1">&#39;u\u0308&#39;</span>


<span class="c1">// In its composed form, it is 2 bytes long</span>
<span class="o">&gt;</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">&#39;u\u0308&#39;</span><span class="p">.</span><span class="nx">normalize</span><span class="p">(</span><span class="s1">&#39;NFKC&#39;</span><span class="p">))</span>
<span class="o">&lt;</span><span class="nx">Buffer</span> <span class="nx">c3</span> <span class="nx">bc</span><span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">&#39;\u00fc&#39;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="nx">Buffer</span> <span class="nx">c3</span> <span class="nx">bc</span><span class="o">&gt;</span>

<span class="c1">// Whereas the decomposed form is 3 bytes, the letter u followed by U+0308</span>
<span class="o">&gt;</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">&#39;\u00fc&#39;</span><span class="p">.</span><span class="nx">normalize</span><span class="p">(</span><span class="s1">&#39;NFKD&#39;</span><span class="p">))</span>
<span class="o">&lt;</span><span class="nx">Buffer</span> <span class="mf">75</span> <span class="nx">cc</span> <span class="mf">88</span><span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">&#39;u\u0308&#39;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="nx">Buffer</span> <span class="mf">75</span> <span class="nx">cc</span> <span class="mf">88</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Compatibility equivalence mode</strong></p>
<p>Certain strings are often displayed the same, even though they may have different semantic means. For example, UTF-8 provides a code point for the roman number for one, which appears as the letter I, in most fonts identically. Compatibility equivalence will fold these two cases into simply the capital letter I.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="s1">&#39;</span><span class="se">\u2160</span><span class="s1">&#39;</span>
<span class="s1">&#39;I&#39;</span>
<span class="o">&gt;</span> <span class="s1">&#39;I&#39;</span>
<span class="s1">&#39;I&#39;</span>
<span class="o">&gt;</span> <span class="s1">&#39;</span><span class="se">\u2160</span><span class="s1">&#39;</span> <span class="o">===</span> <span class="s1">&#39;I&#39;</span>
<span class="n">false</span>
<span class="o">&gt;</span> <span class="s1">&#39;</span><span class="se">\u2160</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFKC&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;I&#39;</span>
<span class="n">true</span>
</pre></div>
</div>
<p><strong>Normalizing</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">normalize()</span></code> method of a string can be used to convert a string to a
specific form. Without going into too much detail, I generally recommend
<code class="docutils literal notranslate"><span class="pre">NFKC</span></code>, however if you wish to dive deeper into this, a nice short summary
can be found in Pythons <a class="reference external" href="https://docs.python.org/2/library/unicodedata.html#unicodedata.normalize">unicodedata module</a>’s
documentation.</p>
<p>For browsers without <code class="docutils literal notranslate"><span class="pre">normalize()</span></code> support, the <a class="reference external" href="https://www.npmjs.com/package/unorm">npm unorm module</a>
can be used to polyfill strings.</p>
<p><strong>Another example of encoding woes</strong></p>
<p>One quick story I will share is a project which used the <code class="docutils literal notranslate"><span class="pre">SHA256(encodeURI(password))</span></code> as
a key, which (ignoring <a class="reference external" href="https://en.wikipedia.org/wiki/Rainbow_table">rainbow table attacks</a>)
had an unfortunate consequence of old web browsers replacing spaces with <code class="docutils literal notranslate"><span class="pre">+</span></code> while on new web
browsers, replacing it with a <code class="docutils literal notranslate"><span class="pre">%20</span></code>, causing issues for anyone who used spaces in their password.</p>
<div class="section" id="suggestions">
<h3>Suggestions<a class="headerlink" href="#suggestions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>While it may be inconvenient to many international users, one option is to restrict passwords to a safe subset of ASCII, for example: <code class="docutils literal notranslate"><span class="pre">/^[A-Za-z0-9!&#64;#$%^&amp;*()]+$/</span></code>.</p></li>
<li><p>My personal recommendation is to normalize to the NFKC form, however, one could imagine setting their password to a Chinese phrase on one computer, and then one day using a computer that does not have Chinese input capabilities and therefore be unable to log in.</p></li>
</ul>
<p><strong>See:</strong> <a class="reference external" href="https://en.wikipedia.org/wiki/Unicode_equivalence">Unicode Equivalence</a></p>
</div>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<p>The test cases from the <a class="reference external" href="http://www.tarsnap.com/scrypt/scrypt.pdf">scrypt whitepaper</a> are included in <code class="docutils literal notranslate"><span class="pre">test/test-vectors.json</span></code> and can be run using:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">npm</span> <span class="nx">test</span>
</pre></div>
</div>
</div>
<div class="section" id="special-thanks">
<h2>Special Thanks<a class="headerlink" href="#special-thanks" title="Permalink to this headline">¶</a></h2>
<p>I would like to thank &#64;dchest for his <a class="reference external" href="https://github.com/dchest/scrypt-async-js">scrypt-async</a>
library and for his assistance providing feedback and optimization suggestions.</p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>MIT license.</p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.tarsnap.com/scrypt/scrypt.pdf">scrypt white paper</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Scrypt">Wikipedia</a></p></li>
<li><p><a class="reference external" href="https://www.npmjs.com/package/scrypt-async">scrypt-async npm module</a></p></li>
<li><p><a class="reference external" href="https://www.npmjs.com/package/scryptsy">scryptsy npm module</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Unicode_equivalence">Unicode Equivalence</a></p></li>
</ul>
</div>
<div class="section" id="donations">
<h2>Donations<a class="headerlink" href="#donations" title="Permalink to this headline">¶</a></h2>
<p>Obviously, it’s all licensed under the MIT license, so use it as you wish;
but if you’d like to buy me a coffee, I won’t complain. =)</p>
<ul class="simple">
<li><p>Ethereum - <code class="docutils literal notranslate"><span class="pre">ricmoo.eth</span></code></p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./nbs/z-repo_Solidity/Faucet/node_modules/scrypt-js"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Dave Friedman<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../../../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>